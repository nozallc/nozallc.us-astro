---
import en from '../i18n/locales/en.json';
import es from '../i18n/locales/es.json';

const lang = Astro.props.lang || 'en';
const translations = lang === 'es' ? es : en;
const t = (key) => translations[key] || key;

// English default = no prefix. Spanish = /es prefix.
const prefix = lang === 'es' ? '/es' : '';
---

<footer class="footer">
	<div class="footer-content">
		<div class="footer-col">
			<img src="/NOZALLC.US.svg" alt="NOZA LLC" width="100" height="100" class="footer-logo" decoding="async" />
			<p class="footer-tagline">{t('footer.tagline')}</p>
		</div>

		<div class="footer-col">
			<h4>{t('footer.services')}</h4>
			<ul id="footer-services-list">
				<li><a href={`${prefix}/digital-marketing`} class="footer-digital-marketing">{t('footer.digitalMarketing')}</a></li>
				<li><a href={`${prefix}/websites`} class="footer-websites">{t('footer.webDesign')}</a></li>
				<li><a href={`${prefix}/branding`} class="footer-branding">{t('footer.branding')}</a></li>
				<li><a href={`${prefix}/consulting`} class="footer-consulting">{t('footer.consulting')}</a></li>
			</ul>
		</div>

		<div class="footer-col">
			<h4>{t('footer.company')}</h4>
			<ul id="footer-company-list">
				<li><a href={`${prefix}/about`} class="footer-about">{t('footer.aboutUs')}</a></li>
				<li><a href={`${prefix}/services`} class="footer-services">{t('footer.services')}</a></li>
				<li><a href={`${prefix}/vendor-network`} class="footer-vendor-network">{t('footer.vendorNetwork')}</a></li>
				<li><a href={`${prefix}/contact`} class="footer-contact">Contact</a></li>
			</ul>
		</div>

		<div class="footer-col">
			<h4>{t('footer.connect')}</h4>
			<ul>
				<li><a href="https://www.instagram.com/nozallc.us" target="_blank" rel="noopener noreferrer">{t('footer.instagram')}</a></li>
				<li><a href="https://www.facebook.com/nozallc.us" target="_blank" rel="noopener noreferrer">{t('footer.facebook')}</a></li>
				<li><a href="https://www.linkedin.com/company/nozallc.us" target="_blank" rel="noopener noreferrer">{t('footer.linkedin')}</a></li>
				<li><a href="mailto:hello@nozallc.us">{t('footer.email')}</a></li>
			</ul>
		</div>
	</div>

	<div class="footer-bottom">
		<p>{t('footer.copyright')}</p>
	</div>
</footer>



<script>
	// Update footer links based on current language
	function updateFooterLinks() {
		const pathname = window.location.pathname;
		const isSpanish = pathname.startsWith('/es/') || pathname === '/es';

		const footerLinks = {
			'footer-digital-marketing': isSpanish ? '/es/digital-marketing' : '/digital-marketing',
			'footer-websites': isSpanish ? '/es/websites' : '/websites',
			'footer-branding': isSpanish ? '/es/branding' : '/branding',
			'footer-consulting': isSpanish ? '/es/consulting' : '/consulting',
			'footer-about': isSpanish ? '/es/about' : '/about',
			'footer-services': isSpanish ? '/es/services' : '/services',
			'footer-vendor-network': isSpanish ? '/es/vendor-network' : '/vendor-network',
			'footer-contact': isSpanish ? '/es/contact' : '/contact',
		};

		for (const [className, href] of Object.entries(footerLinks)) {
			const link = document.querySelector(`.${className}`);
			if (link) {
				link.href = href;
			}
		}
	}

	// Run on page load
	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', updateFooterLinks);
	} else {
		updateFooterLinks();
	}
</script>
